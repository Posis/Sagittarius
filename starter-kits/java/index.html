<!DOCTYPE html><html><head><title>Java - Sagittarius Wiki</title><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="author" content="William Gaul"><link rel="icon" type="image/x-icon" href="data:image/x-icon;base64,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"><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.2/css/bootstrap.min.css"><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/tomorrow.min.css"><link rel="stylesheet" type="text/css" href="../../css/main.css"></head><body><header role="banner" class="navbar navbar-default navbar-fixed-top"><div class="container"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target=".navbar-collapse" class="navbar-toggle"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="../.." class="navbar-brand">Sagittarius Wiki</a></div><nav role="navigation" class="collapse navbar-collapse"><ul class="nav navbar-nav"><li><a href="../../getting-started">Getting Started</a></li><li><a href="https://github.com/willyg302/Sagittarius/releases">Download</a></li><li><a href="..">Starter Kits</a></li><li><a href="../../modules">Modules</a></li><li><a href="../../wizard">Wizard</a></li></ul></nav></div></header><div class="doc-header"><div class="container"><h1>Java</h1><p>The tutorial hub for the Java starter kit</p></div></div><div class="container"><div class="row"><div id="leftcol" class="col-md-3"><ul id="sidenav" class="nav nav-stacked doc-sidenav"><li><a href="#basic-integration">Basic Integration</a></li><li><a href="#easy-motd-module">Easy: MOTD Module</a></li><li><a href="#medium-server-browser">Medium: Server Browser</a></li><li><a href="#special-functions">Special Functions</a></li><li><a href="#logging">Logging</a></li></ul></div><div class="col-md-9"><h1 id="basic-integration">Basic Integration</h1>
<p>Copy the <code>sagittarius</code> package into the <code>src/</code> directory of your project and the <code>LIB</code> folder into a convenient place in your project’s tree. Make sure to add the JARs inside the <code>LIB</code> folder as dependencies for your project.</p>
<p>Once you have added all files without errors, creating an instance of Sagittarius is very simple:</p>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String APP_ID = [APP ID HERE];
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String APP_PASS = [APP PASSWORD HERE];

<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{
    Sagittarius sag = <span class="hljs-keyword">new</span> Sagittarius(APP_ID, APP_PASS);
}
</code></pre>
<p>Make sure to replace <code>[APP ID HERE]</code> and <code>[APP PASSWORD HERE]</code> with your own application ID and password. At this point Sagittarius will be fully integrated and ready to use, but it can’t really do anything just yet. To start leveraging its power you will need to write some <em>modules</em>.</p>
<h1 id="easy-motd-module">Easy: MOTD Module</h1>
<h2 id="understanding-modules">Understanding Modules</h2>
<p>Sagittarius is structured around the idea of <span class="label label-danger">MODULES</span> that perform <span class="label label-danger">ACTIONS</span>. If you look in the starter kit you will notice two base classes, <code>Action.java</code> and <code>Module.java</code>. The actions that Sagittarius is capable of performing are fixed; that is, you will never have to write a subclass of <code>Action.java</code>. You <em>will</em>, however, have to create modules that use the actions available to Sagittarius.</p>
<p>In order to use a module you will have to <strong>register</strong> it to Sagittarius and <strong>retrieve</strong> it when you want to use it. In many ways Sagittarius acts as a “module manager”. The great thing is that you can write and register as many modules as you’d like: a Server Module, a Login Module, and so on — one for each of the features you’d like your game to support.</p>
<p>To better understand how modules work, let’s write a simple Message of the Day Module.</p>
<h2 id="uploading-a-motd">Uploading a MOTD</h2>
<p>Before we start coding, we need to define what we want our MOTD to be and actually host one on our App Engine application. Our MOTD will be extremely simple, just a single string that we will call the “message”. A full MOTD DBObject might look something like this:</p>
<pre><code>object_type=&quot;motd&quot;
object_name=&quot;motd&quot;
message=&quot;Welcome to my game, have fun playing!&quot;
</code></pre><p>The first two attributes are required, so we’ll simply set them as <code>&quot;motd&quot;</code> to make filtering for the MOTD easier.</p>
<p>Now we need to upload our message. You can use the <a href="../../wizard">Sagittarius Wizard</a> to do this. If this is your first time uploading a MOTD, set the action button to <strong>Add</strong> and add three <strong>Add Attribute</strong> buttons to set the attributes to the values listed above. If you already have a MOTD, you can set the action button to <strong>Modify</strong> instead to modify the message attribute.</p>
<h2 id="defining-our-class">Defining Our Class</h2>
<p>The first thing we’ll do code-wise is create a new class extending from <code>Module.java</code> and copy over all the necessary functions:</p>
<pre><code class="lang-java"><span class="hljs-keyword">import</span> sagittarius.Module;
<span class="hljs-keyword">import</span> sagittarius.Sagittarius;
<span class="hljs-keyword">import</span> sagittarius.SagResponse;

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MOTDModule</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Module</span> </span>{

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">MOTDModule</span><span class="hljs-params">(Sagittarius s)</span> </span>{
        <span class="hljs-keyword">super</span>(s);
        <span class="hljs-keyword">this</span>.ID = <span class="hljs-string">"motd"</span>;
    }

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnResponseReceived</span><span class="hljs-params">(String ActionID, SagResponse resp)</span> </span>{
        <span class="hljs-comment">// When a response is received from the remote service</span>
    }
}
</code></pre>
<p>Save this file as <code>MOTDModule.java</code> in your project’s source directory. Every module you create should have at least this basic skeleton. Although you do not need to have anything in the <code>OnResponseReceived()</code> function, you must override the constructor to specify a module ID. This ID will be used by Sagittarius to identify and retrieve instances of this module, and should be unique (otherwise, modules could be confused for each other).</p>
<h2 id="the-handler-pattern">The Handler Pattern</h2>
<p>Anything that relies on an Internet connection is <strong>asynchronous</strong>. That is, we cannot predict how long it will take for us to send data to our App Engine application, or when the server will reply. Because of this, we cannot simply wait for a response; we want to be <strong>notified</strong> when a response is received.</p>
<p>Sagittarius masks most of the complexity of such event handling for you, piping all notifications through the <code>OnResponseReceived()</code> function we’ve already declared. However, your project will be interacting with your modules directly, so we need another layer of event handlers within each module you make. Thankfully there is a very simple <em>handler pattern</em> to follow:</p>
<pre><code class="lang-java"><span class="hljs-keyword">import</span> sagittarius.Handler;
<span class="hljs-keyword">import</span> sagittarius.Module;
<span class="hljs-keyword">import</span> sagittarius.Sagittarius;
<span class="hljs-keyword">import</span> sagittarius.SagResponse;

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MOTDModule</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Module</span> </span>{

    <span class="hljs-keyword">private</span> Handler handler;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">MOTDModule</span><span class="hljs-params">(Sagittarius s)</span> </span>{
        <span class="hljs-keyword">super</span>(s);
        <span class="hljs-keyword">this</span>.ID = <span class="hljs-string">"motd"</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">RegisterOnMOTDReceivedHandler</span><span class="hljs-params">(Handler h)</span> </span>{
        <span class="hljs-keyword">this</span>.handler = h;
    }

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnResponseReceived</span><span class="hljs-params">(String ActionID, SagResponse resp)</span> </span>{
        handler.invoke();
    }
}
</code></pre>
<p>A class that wants to know when the Message of the Day has been received simply registers a handler through <code>RegisterOnMOTDReceivedHandler()</code>. When everything is done, <code>OnResponseReceived()</code> is called, and in turn the custom handler. <code>Handler.java</code> is a very simple abstract class that defines one method, <code>invoke()</code>, that can be overridden in an <a href="http://docs.oracle.com/javase/tutorial/java/javaOO/innerclasses.html">anonymous inner class</a> to do what you want.</p>
<p>We’ll see this pattern in action a little later on, but for now you should remember how to set it up:</p>
<ul>
<li>Declare a handler</li>
<li>Make a function that registers an anonymous instance to this handler</li>
<li>Call the handler when you want to notify that something has been done</li>
</ul>
<h2 id="caching-the-motd">Caching the MOTD</h2>
<p>Every time you communicate with your App Engine application, you use a tiny bit of its <a href="https://developers.google.com/appengine/docs/quotas">quota</a>. If you go over the quota your application will go down (equivalent to a crash), so it’s important to communicate only when absolutely necessary.</p>
<p>In the case of the Message of the Day, we expect the message to change approximately once every 24 hours — not very often, in other words. Although the MOTD may be updated while the player is playing, we will assume that this scenario is very unlikely. So, we can get away with only querying for the MOTD <em>once</em>: upon starting the game.</p>
<p>The typical way to handle data from Sagittarius is to maintain a <strong>local cache</strong> of it. When you ask Sagittarius for new information, the local cache is updated. Although we might get the MOTD value often (every time the player exits to the main menu, for example), we are really only getting its cached value. Let’s code this now:</p>
<pre><code class="lang-java"><span class="hljs-keyword">import</span> sagittarius.Handler;
<span class="hljs-keyword">import</span> sagittarius.Module;
<span class="hljs-keyword">import</span> sagittarius.Sagittarius;
<span class="hljs-keyword">import</span> sagittarius.SagResponse;

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MOTDModule</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Module</span> </span>{

    <span class="hljs-keyword">private</span> String motd;

    <span class="hljs-keyword">private</span> Handler handler;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">MOTDModule</span><span class="hljs-params">(Sagittarius s)</span> </span>{
        <span class="hljs-keyword">super</span>(s);
        <span class="hljs-keyword">this</span>.ID = <span class="hljs-string">"motd"</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">RegisterOnMOTDReceivedHandler</span><span class="hljs-params">(Handler h)</span> </span>{
        <span class="hljs-keyword">this</span>.handler = h;
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">GetMOTD</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> motd;
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">QueryMOTD</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-comment">// @TODO</span>
    }

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnResponseReceived</span><span class="hljs-params">(String ActionID, SagResponse resp)</span> </span>{
        handler.invoke();
    }
}
</code></pre>
<p>We have added two new functions. You will call <code>GetMOTD()</code> whenever you want to know the MOTD. When you want to update the MOTD with the value on the server, you can call <code>QueryMOTD()</code>.</p>
<h2 id="querying-the-motd">Querying the MOTD</h2>
<p>Since we only really want to <em>get</em> the latest MOTD from the server, our <code>QueryMOTD()</code> function will only need to implement a single action, appropriately called GetAction:</p>
<pre><code class="lang-java"><span class="hljs-keyword">import</span> sagittarius.GetAction;
<span class="hljs-keyword">import</span> sagittarius.Handler;
<span class="hljs-keyword">import</span> sagittarius.Module;
<span class="hljs-keyword">import</span> sagittarius.Sagittarius;
<span class="hljs-keyword">import</span> sagittarius.SagResponse;

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MOTDModule</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Module</span> </span>{

    <span class="hljs-keyword">private</span> String motd;

    <span class="hljs-keyword">private</span> Handler handler;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">MOTDModule</span><span class="hljs-params">(Sagittarius s)</span> </span>{
        <span class="hljs-keyword">super</span>(s);
        <span class="hljs-keyword">this</span>.ID = <span class="hljs-string">"motd"</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">RegisterOnMOTDReceivedHandler</span><span class="hljs-params">(Handler h)</span> </span>{
        <span class="hljs-keyword">this</span>.handler = h;
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">GetMOTD</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> motd;
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">QueryMOTD</span><span class="hljs-params">()</span> </span>{
        GetAction ga = (GetAction)parent.CreateAction(<span class="hljs-string">"get"</span>);
        ga.AddFilter(GetAction.DBTYPE, <span class="hljs-string">"motd"</span>);
        ga.AddFilter(GetAction.DBNAME, <span class="hljs-string">"motd"</span>);
        ga.AddProjection(<span class="hljs-string">"message"</span>, <span class="hljs-keyword">true</span>);
        ga.Unique();
        SubmitAction(<span class="hljs-string">"motdquery"</span>, ga);
    }

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnResponseReceived</span><span class="hljs-params">(String ActionID, SagResponse resp)</span> </span>{
        motd = resp.getDBValue(<span class="hljs-string">"message"</span>);
        handler.invoke();
    }
}
</code></pre>
<p>Our added code shows how to make use of the actions bundled with the starter kit. First, we create a new instance of GetAction. Then we add our filters and projections to it. We only want to get the DBObject with <code>object_type==&quot;motd&quot;</code> and <code>object_name==&quot;motd&quot;</code>, so we add those filters using the special shortcut variables <code>DBTYPE</code> and <code>DBNAME</code> respectively. We only want to return the actual <em>message</em>, so we add a projection for that field. Since we expect there to be only one MOTD, we make the query unique. And finally, we submit the GetAction and assign it an ID of <code>&quot;motdquery&quot;</code> so that it can be identified later.</p>
<p>Any time that Sagittarius receives a reply from the server, the text will be routed to <code>OnResponseReceived()</code>. Therefore it is here that we want to parse the MOTD message and assign it to our local cache. Replies are encoded as a special SagResponse object, which provides a convenient <code>getDBValue()</code> function to return the first value matching the specified key. Once we do that, our module is complete.</p>
<h2 id="using-our-motd-module">Using Our MOTD Module</h2>
<p>Since this is a simple tutorial, we’ll just create a class that prints the MOTD to the screen as soon as it is received. To demonstrate the asynchronous capabilities of Sagittarius, we will also print a bunch of “o” characters to the screen, one every 40 milliseconds:</p>
<pre><code class="lang-java"><span class="hljs-keyword">import</span> sagittarius.Handler;
<span class="hljs-keyword">import</span> sagittarius.Sagittarius;

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SagittariusTest</span> </span>{

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String APP_ID = [APP ID HERE];
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String APP_PASS = [APP PASSWORD HERE];

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">GrabMOTD</span><span class="hljs-params">(Sagittarius sag)</span> </span>{
        System.out.println(<span class="hljs-string">"OUR MOTD IS: "</span> + ((MOTDModule) sag.GetModule(<span class="hljs-string">"motd"</span>)).GetMOTD());
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException </span>{
        <span class="hljs-keyword">final</span> Sagittarius sag = <span class="hljs-keyword">new</span> Sagittarius(APP_ID, APP_PASS);
        sag.RegisterModule(<span class="hljs-keyword">new</span> MOTDModule(sag));

        MOTDModule m = (MOTDModule) sag.GetModule(<span class="hljs-string">"motd"</span>);
        m.RegisterOnMOTDReceivedHandler(<span class="hljs-keyword">new</span> Handler() {
            <span class="hljs-annotation">@Override</span>
            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">invoke</span><span class="hljs-params">()</span> </span>{
                GrabMOTD(sag);
            }
        });
        m.QueryMOTD();

        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) {
            Thread.sleep(<span class="hljs-number">40</span>);
            System.out.println(<span class="hljs-string">"o"</span>);
        }
    }
}
</code></pre>
<p>The first thing we do is <strong>register</strong> an instance of our MOTDModule to Sagittarius, then <strong>retrieve</strong> our module instance. In a practical application these two actions would not happen one after the other, but they do here for demonstration purposes.</p>
<p>Notice the use of the anonymous inner Handler class: our <code>invoke()</code> function simply calls <code>GrabMOTD()</code>, which in turn prints the value of our module’s cached MOTD to <code>System.out</code>. Since our handler is only called once our module has received a response from the server, we know there will be an updated value in the cache. Remember that this layer of indirection is necessary because web connections are asynchronous.</p>
<p>Running the test class should produce something like this:</p>
<pre><code>[Sagittarius] DEBUG: Resolving: http://your-app-id-here.appspot.com
[Sagittarius] INFO: TCP connection opened for module motd and query motdquery
o
o
o
o
o
o
o
o
[Sagittarius] DEBUG: End TCP connection
[Sagittarius] DEBUG: Received Text: &lt;message&gt;Welcome to my game, have fun playing!&lt;/message&gt;

[Sagittarius] INFO: TCP connection closed for module motd and query motdquery
OUR MOTD IS: Welcome to my game, have fun playing!
o
o
o
o
o
...
</code></pre><p>Notice how the o’s continue to print even as Sagittarius is retrieving our MOTD. It took 8 o’s, or about 320 milliseconds, for the round-trip to complete, but during that time the application was free to continue working.</p>
<p>Congratulations, you have just written your first module!</p>
<h1 id="medium-server-browser">Medium: Server Browser</h1>
<p>Coming soon!</p>
<h1 id="special-functions">Special Functions</h1>
<h2 id="sending-mail">Sending Mail</h2>
<p>You can send an email any time from within your application using the <code>SendMail()</code> function in <code>Sagittarius.java</code>:</p>
<pre><code class="lang-java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SendMail</span><span class="hljs-params">(String receiver, String subject, String message, String sender)</span></span>
</code></pre>
<p>The sender parameter is a string referencing the subdomain of your application that you want the email to be sent from. For example, if your <code>Application Identifier</code> is “myapplication” and your sender parameter is set to “donuts”, then the recipient will receive an email from <strong>donuts@myapplication.appspotmail.com</strong>. Note that if you pass in an empty string for the sender, it will default to “admin”.</p>
<h1 id="logging">Logging</h1>
<p>Sagittarius has a built-in log system that supports conditional logging via an enum defined in <code>Sagittarius.java</code>:</p>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> ELogLevel {
    LOG_None, LOG_Error, LOG_Warn, LOG_Info, LOG_Debug;
}
</code></pre>
<p>You can set the logging level using the static function <code>Sagittarius.SetLogLevel()</code>. The levels are defined roughly as follows:</p>
<ul>
<li><strong>LOG_None</strong>: Log nothing at all</li>
<li><strong>LOG_Error</strong>: Log only errors, which are unrecoverable faults that should be handled</li>
<li><strong>LOG_Warn</strong>: Warnings are recoverable errors; there is a problem but the game can continue running</li>
<li><strong>LOG_Info</strong>: General important information about connections is logged by default</li>
<li><strong>LOG_Debug</strong>: Log everything, including debug information (which is typically verbose)</li>
</ul>
<p>To use the logging system, you can call the following functions defined in <code>Sagittarius.java</code>:</p>
<pre><code class="lang-java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">LogError</span><span class="hljs-params">(String msg, String cat)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">LogWarn</span><span class="hljs-params">(String msg, String cat)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">LogInfo</span><span class="hljs-params">(String msg, String cat)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">LogDebug</span><span class="hljs-params">(String msg, String cat)</span></span>
</code></pre>
<p>There are also versions of all four functions without the second <code>cat</code> parameter. This parameter is a tag that will be enclosed in brackets preceding the message in the log. If you decide to specify it, you would typically use the name of the class that you are logging from. Remember that logging is filtered by the <code>logLevel</code>, so if your logging level is <code>LOG_Warn</code> but you call <code>LogInfo()</code>, that message will not be logged.</p>
<p>By default, Sagittarius outputs the log to <code>System.out</code>. You can change the PrintStream that Sagittarius logs to by using the static function <code>Sagittarius.SetLogStream()</code>:</p>
<pre><code class="lang-java">PrintStream myLog = <span class="hljs-keyword">new</span> PrintStream(<span class="hljs-keyword">new</span> FileOutputStream(<span class="hljs-string">"MyAwesomeGame-Log.txt"</span>, <span class="hljs-keyword">true</span>));
Sagittarius.SetLogStream(myLog);
</code></pre>
</div></div></div><footer class="footer"><div class="container"><ul class="social-buttons"><li><iframe src="http://ghbtns.com/github-btn.html?user=willyg302&amp;repo=Sagittarius&amp;type=watch&amp;count=true" width="75" height="20" title="Star on GitHub" class="github-btn"></iframe></li><li><iframe src="http://ghbtns.com/github-btn.html?user=willyg302&amp;repo=Sagittarius&amp;type=fork&amp;count=true" width="75" height="20" title="Fork on GitHub" class="github-btn"></iframe></li></ul><p>Copyright &copy; 2015 <a href="http://willyg302.github.io/">WillyG Productions</a></p></div></footer><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.2/js/bootstrap.min.js"></script><script type="text/javascript">$('#sidenav').affix({
	offset: {
		top: 235
	}
});

$(document.body).scrollspy({
	target: '#leftcol',
	offset: $('.navbar').outerHeight(true) + 10
});

$('a[href*=#]:not([href=#])').click(function() {
	if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') && location.hostname == this.hostname) {
		var target = $(this.hash);
		target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
		if (target.length) {
			$('html,body').animate({
				scrollTop: target.offset().top - 50
			}, 500);
		}
	}
});</script></body></html>